
<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/responsive/2.1.1/js/dataTables.responsive.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/responsive/2.1.1/js/responsive.bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css"	type="text/css" />	
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"	type="text/css" />
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css"	type="text/css" />
	<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css"	type="text/css" />	
	<style>
		input[type=text] {
			width: 130px;
			box-sizing: border-box;
			border: 2px solid #ccc;
			border-radius: 4px;
			font-size: 16px;
			background-color: white;
			background-image: url('searchicon.png');
			background-position: 10px 10px; 
			background-repeat: no-repeat;
			padding: 12px 20px 12px 40px;
			-webkit-transition: width 0.4s ease-in-out;
			transition: width 0.4s ease-in-out;
			font-size: 18px;
		}

		input[type=text]:focus {
			width: 100%;
		}	
		.registrationList_filter { 
			display: none; 
		}
    img{
      width: 20%;
      height: 20%;
      min-width: 120px;
    }
	</style>
</head>
<body id="content" style="font-family: Trebuchet MS, Tahoma, Verdana, Arial, sans-serif; padding: 10px;">	
	<div class="container" align="center">	
		<img src="./WalkLogo.png"/>
    <h1>BAPS Dallas Walkathon Lookup</h1>
		<br/>
		<input id="search" placeholder="Search by Phone, Email or Address" type="text"/>
		<br/>
		<br/>
    <input type="text" id="bagIdSearch" placeholder="Search by Bag ID">
    <br/>
    <br/>
    </div>
	</div>
  
	<div class="panel panel-default" style="padding: 5px;">
		<div class="panel-heading">Registration Search Result</div>
		<div id="registrationContainer">
			<table id="registrationList" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%"></table>
		</div>
	</div>	
</body>
<script>
var registrationDataTable, registrationData;
$(document).ready(function(){
	loadRegistrationList("#registrationList");
	$("#registrationContainer").hide();
	$("#search").keyup(function() {
		if($("#search").val().length >= 3){
      $("#bagIdSearch").val(''); // Clear the other search box
			$("#registrationContainer").show();
			registrationDataTable.search($("#search").val()).draw();
			$("#registrationList_filter").hide();
		} else {
			$("#registrationContainer").hide();
		}
	});	
	$("#search").focus();
  $('#bagIdSearch').on('keyup change', function() {
    if($("#bagIdSearch").val().length >= 1) {
			$("#search").val(''); // Clear the other search box
			$("#registrationContainer").show();
			registrationDataTable
				.column(0)
				.search(this.value)
				.draw();
			$("#registrationList_filter").hide();
		} else {
			$("#registrationContainer").hide();
		}
    });
});

function loadRegistrationList(tableId){
	registrationDataTable =	$(tableId).DataTable({
		data: registrationData,
		columns: [
			{ title: "Bag Id" },
      { title: "TShirt Size" },
			{ title: "First Name" },
			{ title: "Last Name" },
			{ title: "Address" },
			{ title: "City" },
			{ title: "Phone" },
			{ title: "Email" },
			{ title: "Registration Id" },
		],
    columnDefs: [
           /* {
                "targets": 7,
                "render": function(data, type, row) {
                  // display the first 10 digits of the email
                    if (type === 'display' && data.length > 10) {
                        return data.substring(0, 10) + '...';
                    }
                    return data;
                }
            },
            {
                "targets": 6,
                "render": function(data, type, row) {
                    if (type === 'display') {
                        // mask the last 4 digits of the mobile number
                        return data.slice(0, -4).replace(/./g, '*') + data.slice(-4);
                    }
                    return data;
                }
            },
            {
                "targets": 4,
                "render": function(data, type, row) {
                  // display the first 10 digits of the address
                    if (type === 'display' && data.length > 10) {
                        return data.substring(0, 10) + '...';
                    }
                    return data;
                }
            }*/
        ]
	});
}
registrationData=[
    [
      "Bag Id",
      "TShirt",
      "First Name",
      "Last Name",
      "Address",
      "City",
      "Phone",
      "Email",
      "Registrant Id"
    ],
    [
      "1",
      "M",
      "John",
      "Doe",
      "1000 Acme Lane",
      "Irving",
      "9999999999",
      "mystic@gmail.com",
      "275691"
    ]
 ];
</script>
</html>
